-- DROP TABLE AGENTS;
-- DROP TABLE ORDERS;
-- DROP TABLE CUSTOMER;
-- DROP TABLE BOOKING;
-- DROP TABLE BRANCH;
-- DROP TABLE CARINSURANCE;
-- DROP TABLE RESERVATION;





CREATE TABLE CUSTOMER
(
    Customer_ID NUMBER(10),
    FirstName VARCHAR(255),
    LastName VARCHAR(255),
    Email VARCHAR(255),
    address VARCHAR(255),
    Phone NUMBER(10),
    Agents_ID Number(10),
    Booking_ID NUMBER(10),
    PRIMARY KEY(Customer_ID)
    
);


INSERT INTO CUSTOMER VALUES (2209,'NICOLA','RAPACCHIANI','NicolaR@gmail.com','Via Verdi',074589645, 14698, 12347854);
INSERT INTO CUSTOMER VALUES (2210,'LUKE','PARKER','LukeP@gmail.com','Abbey Road',07458965, 14578, 74896753);
INSERT INTO CUSTOMER VALUES (2211,'MATTEW','ROUGHTON','MattR@gmail.com','rue france',0748665, 13457, 48597484);
INSERT INTO CUSTOMER VALUES (2212,'NOAH','JOHNSON','NJohnson@gmil.com','brighton road',04576455, 12348, 12345678);
INSERT INTO CUSTOMER VALUES (2213,'XIAO','MINN','XMing@gmail.com','Penny LANE',14578452, 12456, 32145687);


SELECT * FROM CUSTOMER;


CREATE TABLE ORDERS
(
    Order_ID NUMBER(10) NOT NULL,
    OrderDate DATE,
    Order_type VARCHAR (255),
    Timeslot NUMBER (5),
    Customer_ID Number(10),
    Agents_ID Number(10),
    PRIMARY KEY (Order_ID)
);

INSERT INTO ORDERS VALUES (0000,'21-JAN-2022','Rent', 72, 2209, 12348);
INSERT INTO ORDERS VALUES (0001,'21-JAN-2022','Buy', 48, 2210, 12456);
INSERT INTO ORDERS VALUES (0002,'22-JAN-2022','Rent', 88, 2211, 13457);
INSERT INTO ORDERS VALUES (0003,'22-JAN-2022','Rent', 24, 2212, 14578);
INSERT INTO ORDERS VALUES (0004,'23-JAN-2022','Buy', 180, 2213, 14698);

SELECT * FROM ORDERS;

CREATE TABLE BOOKING
(   Booking_ID NUMBER(10),
    Customer_ID NUMBER(10),
    PRIMARY KEY (Booking_ID)
);

INSERT INTO BOOKING VALUES (48597484, 2212);
INSERT INTO BOOKING VALUES (32145687, 2213);
INSERT INTO BOOKING VALUES (12345678, 2209);
INSERT INTO BOOKING VALUES (74896753, 2210);
INSERT INTO BOOKING VALUES (12347854, 2213);


CREATE TABLE RESERVATION
(  Reservation_ID NUMBER (10) NOT NULL,
   Booking_Status VARCHAR (255),
   From_Date DATE,
   Return_Date DATE,
   Actual_Return_Date DATE,
   Amounts NUMBER (6, 2),
   PRIMARY KEY (Reservation_ID)
);

INSERT INTO RESERVATION VALUES (98765464, 'Booked', '14-NOV-2022', '22-DEC-2022', NULL, 850.55);
INSERT INTO RESERVATION VALUES (54968425, 'Booked', '08-OCT-2022', '15-DEC-2022', NULL, 1050.55);
INSERT INTO RESERVATION VALUES (26724612, 'Available', '12-NOV-2022', '22-NOV-2022', '21-NOV-2022', 650.55);
INSERT INTO RESERVATION VALUES (32142642, 'Available', '04-NOV-2022', '18-NOV-2022', '15-NOV-2022', 720.55);
INSERT INTO RESERVATION VALUES (32612641, 'Booked', '20-NOV-2022', '20-DEC-2022', NULL, 1050.55);

SELECT * FROM RESERVATION;



CREATE TABLE CARINSURANCE (
    Insurance_ID NUMBER(10),
    Insurance_Type VARCHAR(255),
    Customer_ID NUmber(10),
    Vehicle_ID NUmber(10),
    PRIMARY KEY (Insurance_ID)
);

INSERT INTO CARINSURANCE VALUES (98956224, 'Full', 2212, 4587);
INSERT INTO CARINSURANCE VALUES (45682132, 'Part', 2213, 6897);
INSERT INTO CARINSURANCE VALUES (32549512, 'Full', 2209, 2114);
INSERT INTO CARINSURANCE VALUES (35496458, 'Part', 2210, 1357);
INSERT INTO CARINSURANCE VALUES (14579654, 'Full', 2213, 6586);

SELECT * FROM CARINSURANCE;


CREATE TABLE BRANCH (
    Branch_ID Number(10),
    Cars_ID Number(10),
    City VARCHAR(25),
    Agents_ID Number(10),
    Vehicle_ID Number(10),
    PRIMARY KEY (Branch_ID)
);

INSERT INTO BRANCH VALUES (84575, 5789, 'London', 14578, 4587);
INSERT INTO BRANCH VALUES (54896, 9875, 'Manchester', 14698, 6897);
INSERT INTO BRANCH VALUES (98657, 2654, 'London', 12348, 2114);
INSERT INTO BRANCH VALUES (23545, 1545, 'Liverpool', 12456, 1357);
INSERT INTO BRANCH VALUES (48945, 3567, 'London', 13457, 6586);

SELECT * FROM BRANCH;


CREATE TABLE VEHICLE (
    Vehicle_ID NUMBER(10),
    Vehicle_Model VARCHAR(10),
    Min_Price Number(6, 2),
    Max_Price Number(8, 2),
    Vehicle_Date DATE,
    Branch_ID Number(10),
    PRIMARY KEY (Vehicle_ID)
);

INSERT INTO VEHICLE VALUES (6897, 'Sedan', 920.99, 13000.00, '14-JUN-2002', 84575);
INSERT INTO VEHICLE VALUES (6586, 'Coupe', 1200.25, 15650.60, '22-MAY-2009', 98657);
INSERT INTO VEHICLE VALUES (2114, 'Sedan', 1000.00, 12900.99, '16-OCT-2012', 54896);
INSERT INTO VEHICLE VALUES (4587, 'Coupe', 1150.50, 14000.00, '02-FEB-2018', 48945);
INSERT INTO VEHICLE VALUES (1357, 'Minivan', 950.20, 12800.00, '12-MAR-2010', 23545);

SELECT * FROM VEHICLE;


CREATE TABLE AGENTS (
    Agents_ID Number(10),
    Agents_Rank VARCHAR(10),
    Email VARCHAR(25),
    Customer_ID NUmber(10),
    Vehicle_ID NUmber(10),
    Branch_ID Number(10),
    PRIMARY KEY (Agents_ID)
);


INSERT INTO AGENTS VALUES (12456,'Bronze','agent001@gmail.com', 2210, 1357, 54896);
INSERT INTO AGENTS VALUES (12348,'Gold','agent002@gmail.com', 2209, 4587, 98657);
INSERT INTO AGENTS VALUES (13457,'Bronze','agent003@gmail.com', 2212, 6586, 48945);
INSERT INTO AGENTS VALUES (14578,'Silver','agent004@gmail.com', 2211, 2114, 84575);
INSERT INTO AGENTS VALUES (14698,'Silver','agent005@gmail.com', 2213, 6897, 48945);

SELECT * FROM AGENTS;



ALTER TABLE CUSTOMER
ADD CONSTRAINT cus_age_rel
FOREIGN KEY (Agents_ID)
REFERENCES AGENTS(Agents_ID);

ALTER TABLE CUSTOMER
ADD CONSTRAINT cus_boo_rel
FOREIGN KEY (Booking_ID)
REFERENCES BOOKING(Booking_ID);

ALTER TABLE BOOKING
ADD CONSTRAINT boo_cust_rel
FOREIGN KEY (Customer_ID)
REFERENCES CUSTOMER(Customer_ID);

ALTER TABLE AGENTS
ADD CONSTRAINT age_cus_rel
FOREIGN KEY (Customer_ID)
REFERENCES CUSTOMER(Customer_ID);

ALTER TABLE AGENTS
ADD CONSTRAINT age_bra_rel
FOREIGN KEY (Branch_ID)
REFERENCES BRANCH(Branch_ID);

ALTER TABLE ORDERS
ADD CONSTRAINT ord_cust_rel
FOREIGN KEY (Customer_ID)
REFERENCES CUSTOMER(Customer_ID);

ALTER TABLE ORDERS
ADD CONSTRAINT ord_age_rel
FOREIGN KEY (Agents_ID)
REFERENCES AGENTS(Agents_ID);

ALTER TABLE BRANCH
ADD CONSTRAINT ord_bra_rel
FOREIGN KEY (Vehicle_ID)
REFERENCES VEHICLE(Vehicle_ID);

ALTER TABLE VEHICLE
ADD CONSTRAINT veh_bra_rel
FOREIGN KEY (Branch_ID)
REFERENCES BRANCH(Branch_ID);

ALTER TABLE CARINSURANCE
ADD CONSTRAINT car_cust_rel
FOREIGN KEY (Customer_ID)
REFERENCES CUSTOMER(Customer_ID);

ALTER TABLE CARINSURANCE
ADD CONSTRAINT car_veh_rel
FOREIGN KEY (Vehicle_ID)
REFERENCES VEHICLE(Vehicle_ID);